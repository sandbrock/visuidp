# ============================================================================
# DynamoDB Profile Configuration
# ============================================================================
# Use this profile when deploying with DynamoDB as the database backend
#
# Activation methods:
#   1. Command line: ./mvnw quarkus:dev -Dquarkus.profile=dynamodb
#   2. Environment: export QUARKUS_PROFILE=dynamodb
#   3. Environment: export DATABASE_PROVIDER=dynamodb
#
# This profile automatically:
#   - Sets database provider to DynamoDB
#   - Disables PostgreSQL/Hibernate/Flyway
#   - Configures DynamoDB client
#
# For local development with DynamoDB Local:
#   docker run -d -p 8000:8000 amazon/dynamodb-local
#   Then uncomment the endpoint configuration below
#
# For AWS production deployment:
#   - Use IAM roles (recommended) or AWS credentials
#   - Set DYNAMODB_REGION to your AWS region
#   - Pre-create tables or enable auto-create
# ============================================================================

# Database Provider
idp.database.provider=dynamodb

# DynamoDB Configuration
# AWS Region (required)
idp.database.dynamodb.region=${DYNAMODB_REGION:us-east-1}

# Optional: Custom endpoint for local development with DynamoDB Local
# Uncomment for local testing:
# idp.database.dynamodb.endpoint=http://localhost:8000

# Optional: Table name prefix (default: idp)
# Tables will be named: {prefix}_stacks, {prefix}_blueprints, etc.
idp.database.dynamodb.table-prefix=${DYNAMODB_TABLE_PREFIX:idp}

# Disable PostgreSQL-specific configurations
quarkus.datasource.db-kind=
quarkus.hibernate-orm.enabled=false
quarkus.flyway.enabled=false

# AWS Credentials
# In production, use IAM roles attached to ECS tasks or EC2 instances
# For local development, you can set these environment variables:
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_SESSION_TOKEN=your-session-token (if using temporary credentials)

# DynamoDB-specific settings
# Auto-create tables on startup (useful for development)
idp.database.dynamodb.auto-create-tables=${DYNAMODB_AUTO_CREATE_TABLES:true}

# Provisioned throughput for tables (if auto-creating)
# For production, consider using on-demand billing mode instead
idp.database.dynamodb.read-capacity-units=${DYNAMODB_READ_CAPACITY:5}
idp.database.dynamodb.write-capacity-units=${DYNAMODB_WRITE_CAPACITY:5}

# Logging
quarkus.log.category."software.amazon.awssdk".level=${AWS_SDK_LOG_LEVEL:WARN}
quarkus.log.category."com.angryss.idp.infrastructure.persistence.dynamodb".level=${DYNAMODB_LOG_LEVEL:INFO}
