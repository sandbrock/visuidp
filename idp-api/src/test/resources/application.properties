# test profile runs without root-path; endpoints served at /v1

# ============================================================================
# Database Configuration
# ============================================================================
# Default test profile uses PostgreSQL
idp.database.provider=postgresql

# ============================================================================
# Security Configuration
# ============================================================================
# Admin group configuration for tests
# Match the group name used in test files (IDP-Admins)
idp.security.admin-group=IDP-Admins

# Authentication mechanisms are enabled via beans.xml
# Both ApiKeyAuthenticationMechanism and TraefikAuthenticationMechanism are active
# Priority: ApiKeyAuthenticationMechanism (0) -> TraefikAuthenticationMechanism (1)

# Disable basic auth and enable custom authentication mechanisms
quarkus.http.auth.basic=false
quarkus.http.auth.proactive=false

# ============================================================================
# DynamoDB Test Profile Configuration
# ============================================================================
# This profile is used for running integration tests against DynamoDB Local
# Usage: Run tests with -Dquarkus.test.profile=test-dynamodb
# ============================================================================

# DynamoDB Test Profile - uses DynamoDB Local
%test-dynamodb.idp.database.provider=dynamodb
%test-dynamodb.idp.database.dynamodb.region=us-east-1
%test-dynamodb.idp.database.dynamodb.endpoint=http://localhost:8000
%test-dynamodb.idp.database.dynamodb.table-prefix=test_idp

# Disable PostgreSQL/Hibernate for DynamoDB tests
%test-dynamodb.quarkus.datasource.db-kind=
%test-dynamodb.quarkus.hibernate-orm.enabled=false
%test-dynamodb.quarkus.flyway.migrate-at-start=false

# HTTP test configuration for DynamoDB profile
%test-dynamodb.quarkus.http.test-port=0
